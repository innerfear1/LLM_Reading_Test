# å›¾ç”Ÿå›¾ä½¿ç”¨æŒ‡å— (Image-to-Image Guide)

## ğŸ¨ ä»€ä¹ˆæ˜¯å›¾ç”Ÿå›¾ï¼Ÿ

å›¾ç”Ÿå›¾ (Image-to-Image) æ˜¯ Stable Diffusion çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼Œå®ƒå¯ä»¥æ ¹æ®ä¸€å¼ è¾“å…¥å›¾ç‰‡å’Œæ–‡å­—æè¿°ï¼Œç”Ÿæˆæ–°çš„å›¾ç‰‡ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç”¨äºï¼š

- ğŸ­ **é£æ ¼è½¬æ¢**: å°†ç…§ç‰‡è½¬æ¢ä¸ºä¸åŒè‰ºæœ¯é£æ ¼
- ğŸŒŸ **å›¾åƒå¢å¼º**: æ”¹å–„å›¾ç‰‡è´¨é‡æˆ–æ·»åŠ ç‰¹æ•ˆ
- ğŸ”„ **å›¾åƒç¼–è¾‘**: æ ¹æ®æ–‡å­—æè¿°ä¿®æ”¹å›¾ç‰‡å†…å®¹
- ğŸ¨ **åˆ›æ„å˜æ¢**: å°†ç°å®å›¾ç‰‡è½¬æ¢ä¸ºå¥‡å¹»æˆ–ç§‘å¹»é£æ ¼

## ğŸ“‹ å‚æ•°è¯´æ˜

### æ ¸å¿ƒå‚æ•°

| å‚æ•° | ç±»å‹ | èŒƒå›´ | è¯´æ˜ |
|------|------|------|------|
| `prompt` | str | - | æè¿°ä½ æƒ³è¦çš„å˜æ¢æ•ˆæœ |
| `image` | str/PIL.Image | - | è¾“å…¥å›¾ç‰‡è·¯å¾„æˆ–PILå›¾ç‰‡å¯¹è±¡ |
| `strength` | float | 0.0-1.0 | å˜æ¢å¼ºåº¦ï¼Œè¶Šé«˜å˜åŒ–è¶Šå¤§ |
| `guidance_scale` | float | 1.0-20.0 | æç¤ºè¯éµå¾ªç¨‹åº¦ |
| `num_inference_steps` | int | 10-100 | æ¨ç†æ­¥æ•°ï¼Œè¶Šå¤šè´¨é‡è¶Šå¥½ä½†è¶Šæ…¢ |

### Strength å‚æ•°è¯¦è§£

- **0.0-0.3**: è½»å¾®è°ƒæ•´ï¼Œä¿æŒåŸå›¾å¤§éƒ¨åˆ†ç‰¹å¾
- **0.4-0.6**: ä¸­ç­‰å˜æ¢ï¼Œå¹³è¡¡åŸå›¾å’Œæç¤ºè¯
- **0.7-0.8**: è¾ƒå¤§å˜æ¢ï¼Œæ˜æ˜¾æ”¹å˜é£æ ¼
- **0.9-1.0**: å®Œå…¨å˜æ¢ï¼Œå‡ ä¹é‡æ–°ç”Ÿæˆ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: ç›´æ¥è¿è¡Œä¸»ç¨‹åº

```bash
cd Stable_diffusion
python Laten_SD.py
```

é€‰æ‹©é€‰é¡¹ `2` æˆ– `3` è¿›è¡Œå›¾ç”Ÿå›¾ã€‚

### æ–¹æ³•2: ä½¿ç”¨ç¤ºä¾‹è„šæœ¬

```bash
cd Stable_diffusion
python img2img_example.py
```

### æ–¹æ³•3: åœ¨ä»£ç ä¸­ä½¿ç”¨

```python
from Laten_SD import StableDiffusionApp

# åˆå§‹åŒ–åº”ç”¨
app = StableDiffusionApp()

# å›¾ç”Ÿå›¾
result = app.generate_img2img(
    prompt="transform into anime style",
    image="path/to/your/image.jpg",
    strength=0.7,
    guidance_scale=7.5,
    num_inference_steps=30
)

# æ˜¾ç¤ºç»“æœ
app.display_images(result, "Anime Style")
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. æç¤ºè¯æŠ€å·§

**å¥½çš„æç¤ºè¯ç¤ºä¾‹:**
- `"transform into anime style, colorful and vibrant"`
- `"make it look like a watercolor painting with soft colors"`
- `"add dramatic lighting and cinematic atmosphere"`

**é¿å…çš„æç¤ºè¯:**
- è¿‡äºæ¨¡ç³Š: `"make it better"`
- è¿‡äºå¤æ‚: `"transform into anime style with cyberpunk elements and vintage colors and modern lighting"`

### 2. Strength é€‰æ‹©æŒ‡å—

| å˜æ¢ç±»å‹ | æ¨è Strength | è¯´æ˜ |
|----------|---------------|------|
| è½»å¾®è°ƒè‰² | 0.2-0.4 | ä¿æŒåŸå›¾ç»“æ„ |
| é£æ ¼è½¬æ¢ | 0.5-0.7 | å¹³è¡¡åŸå›¾å’Œé£æ ¼ |
| å¤§å¹…å˜æ¢ | 0.8-0.9 | æ˜¾è‘—æ”¹å˜å¤–è§‚ |
| å®Œå…¨é‡ç»˜ | 0.9-1.0 | å‡ ä¹é‡æ–°ç”Ÿæˆ |

### 3. å›¾ç‰‡å‡†å¤‡

- **æ ¼å¼**: æ”¯æŒ JPG, PNG, WEBP ç­‰å¸¸è§æ ¼å¼
- **å°ºå¯¸**: å»ºè®® 512x512 æˆ– 768x768
- **è´¨é‡**: è¾“å…¥å›¾ç‰‡è´¨é‡è¶Šé«˜ï¼Œè¾“å‡ºæ•ˆæœè¶Šå¥½
- **å†…å®¹**: æ¸…æ™°çš„å›¾ç‰‡æ¯”æ¨¡ç³Šçš„å›¾ç‰‡æ•ˆæœæ›´å¥½

## ğŸ¯ å¸¸è§åº”ç”¨åœºæ™¯

### 1. è‰ºæœ¯é£æ ¼è½¬æ¢

```python
# è½¬æ¢ä¸ºæ²¹ç”»é£æ ¼
result = app.generate_img2img(
    prompt="make it look like a classical oil painting with rich colors",
    image="portrait.jpg",
    strength=0.8
)
```

### 2. åŠ¨æ¼«åŒ–

```python
# è½¬æ¢ä¸ºåŠ¨æ¼«é£æ ¼
result = app.generate_img2img(
    prompt="transform into anime style, colorful and vibrant",
    image="photo.jpg",
    strength=0.7
)
```

### 3. ç¯å¢ƒå˜æ¢

```python
# æ”¹å˜èƒŒæ™¯ç¯å¢ƒ
result = app.generate_img2img(
    prompt="change background to a beautiful garden with flowers",
    image="person.jpg",
    strength=0.6
)
```

### 4. å…‰ç…§æ•ˆæœ

```python
# æ·»åŠ æˆå‰§æ€§å…‰ç…§
result = app.generate_img2img(
    prompt="add dramatic golden hour lighting",
    image="landscape.jpg",
    strength=0.5
)
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å†…å­˜ä½¿ç”¨**: å›¾ç”Ÿå›¾æ¯”æ–‡ç”Ÿå›¾æ¶ˆè€—æ›´å¤šå†…å­˜
2. **å¤„ç†æ—¶é—´**: æ¨ç†æ­¥æ•°è¶Šå¤šï¼Œå¤„ç†æ—¶é—´è¶Šé•¿
3. **å›¾ç‰‡è´¨é‡**: è¾“å…¥å›¾ç‰‡è´¨é‡ç›´æ¥å½±å“è¾“å‡ºæ•ˆæœ
4. **å‚æ•°è°ƒä¼˜**: ä¸åŒå›¾ç‰‡å¯èƒ½éœ€è¦ä¸åŒçš„å‚æ•°è®¾ç½®

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: ç”Ÿæˆå…¨é»‘å›¾ç‰‡
- æ£€æŸ¥è¾“å…¥å›¾ç‰‡æ˜¯å¦æ­£ç¡®åŠ è½½
- å°è¯•é™ä½ `strength` å€¼
- ç¡®ä¿æç¤ºè¯æ¸…æ™°æ˜ç¡®

### é—®é¢˜2: å˜åŒ–å¤ªå°
- å¢åŠ  `strength` å€¼ (0.7-0.9)
- ä½¿ç”¨æ›´å…·ä½“çš„æç¤ºè¯
- å¢åŠ  `guidance_scale` å€¼

### é—®é¢˜3: å˜åŒ–å¤ªå¤§
- é™ä½ `strength` å€¼ (0.3-0.6)
- ä½¿ç”¨æ›´æ¸©å’Œçš„æç¤ºè¯
- å¢åŠ  `num_inference_steps` æé«˜è´¨é‡

### é—®é¢˜4: å†…å­˜ä¸è¶³
- å‡å°‘ `num_inference_steps`
- ä½¿ç”¨è¾ƒå°çš„è¾“å…¥å›¾ç‰‡
- åœ¨ MPS è®¾å¤‡ä¸Šä½¿ç”¨ `float32` ç²¾åº¦

## ğŸ“ è¾“å‡ºæ–‡ä»¶

ç”Ÿæˆçš„å›¾ç‰‡ä¼šä¿å­˜åœ¨ `./outputs/` ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åæ ¼å¼ä¸ºï¼š
- `img2img_[prompt]_[number].png`

ä¾‹å¦‚: `img2img_anime_style_1.png`

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨å›¾ç”Ÿå›¾åŠŸèƒ½äº†ï¼å»ºè®®ä»ç®€å•çš„é£æ ¼è½¬æ¢å¼€å§‹ï¼Œé€æ­¥å°è¯•æ›´å¤æ‚çš„å˜æ¢ã€‚

```bash
# è¿è¡Œç¤ºä¾‹
python img2img_example.py
```

é€‰æ‹©é€‰é¡¹ `1` å¼€å§‹ç®€å•ç¤ºä¾‹ï¼Œæˆ–è€…é€‰æ‹© `2` ä½¿ç”¨ä½ è‡ªå·±çš„å›¾ç‰‡è¿›è¡Œè‡ªå®šä¹‰å˜æ¢ã€‚
